(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68c53bee"],{"06e4":function(e,t,a){"use strict";a("0e0e")},"0e0e":function(e,t,a){},e505:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher-container"},[a("el-container",[a("el-header",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-button-group",[e.$store.state.user.user_role?a("el-button",{on:{click:function(t){e.addFormShow=!0}}},[e._v("添加教师信息")]):e._e(),a("el-button",{on:{click:function(t){e.queryFormShow=!0}}},[e._v("查找教师信息")]),a("el-button",{on:{click:function(t){return e.showAll(t)}}},[e._v("显示全部")])],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.exportTeacher}},[e._v("导出教师信息")])],1),a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{opacity:"0"}},[e._v("1")])]),a("el-col",{attrs:{span:4}},[a("p",[e._v("当前老师数量："+e._s(e.$store.state.teacher.teacherCount))])])],1)],1),a("el-main",[a("el-pagination",{attrs:{"current-page":e.curpage,"page-size":20,layout:"prev, pager, next",total:e.total,"hide-on-single-page":e.isHide},on:{"update:currentPage":function(t){e.curpage=t},"update:current-page":function(t){e.curpage=t}}}),e._l(e.showList,(function(t,r){return a("div",{key:r,staticClass:"showListcontainer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:r===e.curpage-1,expression:"index === curpage - 1"}]},[a("el-table",{attrs:{data:t,border:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},height:e.isHide?500:480}},[a("el-table-column",{attrs:{prop:"teacher_id",label:"教师id"}}),a("el-table-column",{attrs:{prop:"teacher_name",label:"教师名"}}),a("el-table-column",{attrs:{prop:"teacher_category",label:"教师类型"}}),e.$store.state.user.user_role?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.showUpdateForm(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteTeacher(t.row)}}},[e._v("删除")])]}}],null,!0)}):e._e()],1)],1)])})),0===e.showList.length?a("div",{staticClass:"noData"},[a("h2",[e._v("No Data")])]):e._e()],2)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"添加教师信息",visible:e.addFormShow,width:"400px"},on:{"update:visible":function(t){e.addFormShow=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"教师名","label-width":e.formLabelWidth,required:"",prop:"teacher_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.teacher_name,callback:function(t){e.$set(e.addForm,"teacher_name",t)},expression:"addForm.teacher_name"}})],1),a("el-form-item",{attrs:{label:"教师类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.teacher_category,callback:function(t){e.$set(e.addForm,"teacher_category",t)},expression:"addForm.teacher_category"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTeacher("addForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"修改教师信息",visible:e.updateFormShow,width:"400px"},on:{"update:visible":function(t){e.updateFormShow=t}}},[a("el-form",{ref:"updateForm",attrs:{model:e.updateForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"教师名","label-width":e.formLabelWidth,required:"",prop:"teacher_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateForm.teacher_name,callback:function(t){e.$set(e.updateForm,"teacher_name",t)},expression:"updateForm.teacher_name"}})],1),a("el-form-item",{attrs:{label:"教师类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateForm.teacher_category,callback:function(t){e.$set(e.updateForm,"teacher_category",t)},expression:"updateForm.teacher_category"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateFormShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateTeacher("updateForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"查找教师信息",visible:e.queryFormShow,width:"400px"},on:{"update:visible":function(t){e.queryFormShow=t}}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"教师名","label-width":e.formLabelWidth,required:"",prop:"teacher_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.queryForm.teacher_name,callback:function(t){e.$set(e.queryForm,"teacher_name",t)},expression:"queryForm.teacher_name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryFormShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryTeacher("queryForm")}}},[e._v("确 定")])],1)],1)],1)},o=[],s=(a("4de4"),a("d3b7"),{data:function(){return{curpage:1,total:0,teacherList:[],showList:[],value:"",input:"",isHide:!0,addFormShow:!1,addForm:{teacher_name:"",teacher_category:""},updateFormShow:!1,updateForm:{teacher_name:"",teacher_category:""},updateItem:-1,queryFormShow:!1,queryForm:{teacher_name:null},rules:{teacher_name:[{required:!0,message:"请输入教师名称",trigger:"blur"}],teacher_id:[{required:!0,message:"请输入教师id",trigger:"blur"}]},formLabelWidth:"120px"}},created:function(){this.initTeacher()},methods:{initTeacher:function(){var e=this;this.$store.dispatch("teacher/getTeacherList").then((function(t){e.teacherList=t.filter((function(e){return 1!==e.is_delete})),e.initShowList(e.teacherList)})),this.$store.dispatch("teacher/getTeacherCount")},addTeacher:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={teacher_name:t.addForm.teacher_name,teacher_category:t.addForm.teacher_category};t.$store.dispatch("teacher/addTeacher",a).then((function(){t.$message({message:"添加成功",type:"success"}),t.getTeacher()})).catch((function(e){t.$message({message:e,type:"error"})})),t.addFormShow=!1}}))},deleteTeacher:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t,r={teacher_id:e.teacher_id};a.$store.dispatch("teacher/deleteTeacher",r).then((function(){a.$message({message:"删除成功",type:"success"}),a.getTeacher()})).catch((function(){a.$message({type:"error",message:"删除失败"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},queryTeacher:function(e){var t=this;t.$refs[e].validate((function(e){if(e){var a={teacher_name:t.queryForm.teacher_name};t.$store.dispatch("teacher/selectByTeacherName",a).then((function(e){var a=[];a.push(e),console.log(a),t.initShowList(a)})).catch((function(e){t.$message({message:e,type:"error"})})),t.queryFormShow=!1}}))},showUpdateForm:function(e){this.updateItem=e.teacher_id,this.updateForm.teacher_name=e.teacher_name,this.updateFormShow=!0},updateTeacher:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={teacher_id:t.updateItem,teacher_name:t.updateForm.teacher_name,teacher_category:t.updateForm.teacher_category};t.$store.dispatch("teacher/updateTeacher",a).then((function(){t.getTeacher(),t.$message({message:"修改成功",type:"success"})})),t.updateFormShow=!1}else console.log("error submit!!")}))},initShowList:function(e,t){this.showList=[];var a=[];if(!e)return this.total=0,void(this.isHide=!0);if("[object Object]"===Object.prototype.toString.call(e))return a.push(e),this.showList.push(a),this.total=a.length,void(this.isHide=!0);for(var r=0;r<e.length;r++)r%20===0&&0!==r&&(this.showList.push(a),a=[]),a.push(e[r]);a.length>0&&this.showList.push(a),this.total=e.length,this.total>0?this.isHide=!1:this.isHide=!0,t&&t()},showAll:function(e){var t=this;this.paikeStatus=!this.paikeStatus,"BUTTON"===e.target.nodeName?e.target.blur():e.target.parentNode.blur(),this.initShowList(this.teacherList,(function(){t.$message({type:"success",message:"已显示全部数据"})}))},exportTeacher:function(){this.$store.dispatch("teacher/exportTeacher")}}}),i=s,c=(a("06e4"),a("2877")),n=Object(c["a"])(i,r,o,!1,null,"48c45862",null);t["default"]=n.exports}}]);